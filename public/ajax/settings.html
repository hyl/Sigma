<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h4 class="modal-title">Settings</h4>
    </div>
    <div class="modal-body">
      <div class="checkbox">
        <label>
          <input type="checkbox" id="hide_buttons">
          Hide Disconnect and Send Picture buttons while typing a message
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" id="native_notification">
          Display native notification for new messages through Notification Center (Beta)
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" id="parse_links">
          Automatically turn URLs into clickable links
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" id="parse_images">
          Embed links to images in the chat
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" id="parse_youtube">
          Embed YouTube video links
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      <button type="button" class="btn btn-primary" id="save">Save</button>
    </div>
  </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

<script>
  if(!window.Notification){
    $("#native_notification").prop("disabled", true);
  }
  if(window.localStorage.getItem("hide_buttons") == "true"){
    $("#hide_buttons").prop("checked", true);
  }else{
    $("#hide_buttons").prop("checked", false);
  }
  if(window.localStorage.getItem("native_notification") == "true"){
    $("#native_notification").prop("checked", true);
  }else{
    $("#native_notification").prop("checked", false);
  }
  if(window.localStorage.getItem("parse_links") == "true"){
    $("#parse_links").prop("checked", true);
  }else{
    $("#parse_links").prop("checked", false);
  }
  if(window.localStorage.getItem("parse_images") == "true"){
    $("#parse_images").prop("checked", true);
  }else{
    $("#parse_images").prop("checked", false);
  }
  if(window.localStorage.getItem("parse_youtube") == "true"){
    $("#parse_youtube").prop("checked", true);
  }else{
    $("#parse_youtube").prop("checked", false);
  }
  $("#save").click(function(){
    if($("#hide_buttons").prop("checked")){
      window.localStorage.setItem("hide_buttons", true);
    }else{
      window.localStorage.setItem("hide_buttons", false);
    }
    if($("#native_notification").prop("checked")){
      notify("Test Notification", "You have successfully enabled notifications", "http://cdn1.iconfinder.com/data/icons/windows-8-metro-style/26/checked_checkbox.png");
      window.localStorage.setItem("native_notification", true);
    }else{
      window.localStorage.setItem("native_notification", false);
    }
    if($("#parse_links").prop("checked")){
      window.localStorage.setItem("parse_links", true);
    }else{
      window.localStorage.setItem("parse_links", false);
    }
    if($("#parse_images").prop("checked")){
      window.localStorage.setItem("parse_images", true);
    }else{
      window.localStorage.setItem("parse_images", false);
    }
    if($("#parse_youtube").prop("checked")){
      window.localStorage.setItem("parse_youtube", true);
    }else{
      window.localStorage.setItem("parse_youtube", false);
    }
    alert("Settings saved. Please note that they are still in Beta so may not work very well. Your settings are stored in localStorage so shouldn't be lost if you change page.x");
  });
</script>